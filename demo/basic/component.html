<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisionUI - Component Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            display: flex;
            background-color: #f0e6ff;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar styles */
        .sidebar {
            width: 320px;
            background-color: #f0e6ff;
            height: 100%;
            border-right: 1px solid #ddd;
            overflow-y: auto;
            position: relative;
        }

        .header {
            padding: 20px;
            display: flex;
            align-items: center;
        }

        .back-button {
            margin-right: 15px;
            cursor: pointer;
        }

        .project-name {
            font-size: 1.2rem;
            color: #333;
            font-weight: 500;
        }

        .components-library {
            padding: 20px;
            border-bottom: 1px solid #ddd;
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
        }

        .search-container {
            padding: 15px 20px;
        }

        .search-bar {
            width: 100%;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background-color: rgba(126, 63, 179, 0.15);
            color: #333;
            font-size: 1rem;
            display: flex;
            align-items: center;
        }

        .search-bar svg {
            margin-right: 10px;
        }

        .component-category {
            padding: 15px 20px;
            font-size: 1.1rem;
            font-weight: 500;
            color: #333;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 0 20px 20px;
        }

        .component-item {
            background-color: white;
            border-radius: 4px;
            height: 80px;
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.2s;
        }

        .component-item:hover {
            box-shadow: 0 4px 8px rgba(126, 63, 179, 0.2);
            transform: translateY(-2px);
        }

        .component-item.button {
            font-weight: 500;
            color: #333;
        }

        .component-item.primary-button {
            background-color: #7E3FB3;
            color: white;
        }

        .component-item.secondary-button {
            border: 2px solid #7E3FB3;
            color: #7E3FB3;
        }

        .component-item.magic-card {
            background: linear-gradient(135deg, #7E3FB3 0%, #E91E85 100%);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 500;
        }

        /* Design area styles */
        .design-area {
            flex: 1;
            background-color: #222;
            padding: 20px;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .design-title {
            color: white;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: 500;
        }

        .canvas {
            background-color: white;
            flex: 1;
            border-radius: 4px;
            position: relative;
            overflow: auto;
        }

        /* Draggable elements within the canvas */
        .canvas-element {
            position: absolute;
            cursor: move;
            min-width: 100px;
            min-height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            user-select: none;
            z-index: 1;
        }

        .canvas-element.selected {
            outline: 2px solid #7E3FB3;
        }

        .canvas-element.button {
            padding: 8px 16px;
            border-radius: 4px;
            font-weight: 500;
        }

        .canvas-element.primary-button {
            background-color: #7E3FB3;
            color: white;
        }

        .canvas-element.secondary-button {
            background-color: white;
            border: 2px solid #7E3FB3;
            color: #7E3FB3;
        }

        .canvas-element.magic-card {
            background: linear-gradient(135deg, #7E3FB3 0%, #E91E85 100%);
            color: white;
            padding: 16px;
            border-radius: 8px;
            min-width: 200px;
            min-height: 120px;
        }

        .navbar-container {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: white;
            border-bottom: 1px solid #eee;
        }

        .navbar-logo {
            width: 100px;
            height: 30px;
            background-color: #f5f5f5;
        }

        .navbar-menu {
            width: 200px;
            height: 30px;
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <!-- Sidebar with components -->
    <div class="sidebar">
        <div class="header">
            <div class="back-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 12H5" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 19L5 12L12 5" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="project-name">project-name</div>
        </div>
        
        <div class="components-library">Components Library</div>
        
        <div class="search-container">
            <div class="search-bar">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="#7E3FB3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 21L16.65 16.65" stroke="#7E3FB3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                search
            </div>
        </div>
        
        <div class="component-category">Navbar</div>
        <div class="component-grid">
            <div class="component-item navbar" draggable="true" data-component="navbar">
                <div class="navbar-logo"></div>
            </div>
            <div class="component-item navbar" draggable="true" data-component="navbar-with-menu">
                <div class="navbar-menu"></div>
            </div>
        </div>
        
        <div class="component-category">buttons</div>
        <div class="component-grid">
            <div class="component-item primary-button" draggable="true" data-component="primary-button">
                Button
            </div>
            <div class="component-item secondary-button" draggable="true" data-component="secondary-button">
                Button
            </div>
            <div class="component-item button" draggable="true" data-component="text-button">
                Text Button
            </div>
        </div>
        
        <div class="component-category">magic card</div>
        <div class="component-grid">
            <div class="component-item magic-card" draggable="true" data-component="magic-card">
                Magic Card
            </div>
            <div class="component-item magic-card" draggable="true" data-component="magic-card-alt" style="background: linear-gradient(135deg, #3F51B5 0%, #00BCD4 100%);">
                Magic Card
            </div>
        </div>
    </div>
    
    <!-- Design area -->
    <div class="design-area">
        <div class="design-title">design</div>
        <div class="canvas" id="canvas"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('canvas');
            let selectedElement = null;
            let offsetX, offsetY;
            let isDragging = false;
            
            // Counter to generate unique IDs
            let elementCounter = 0;
            
            // Handle component drag from sidebar
            const draggableItems = document.querySelectorAll('.component-item');
            
            draggableItems.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.getAttribute('data-component'));
                    e.dataTransfer.effectAllowed = 'copy';
                });
            });
            
            // Handle dropping onto canvas
            canvas.addEventListener('dragover', function(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'copy';
            });
            
            canvas.addEventListener('drop', function(e) {
                e.preventDefault();
                const componentType = e.dataTransfer.getData('text/plain');
                
                // Calculate position relative to canvas
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                createComponent(componentType, x, y);
            });
            
            // Create a new component
            function createComponent(type, x, y) {
                const element = document.createElement('div');
                element.className = `canvas-element ${type}`;
                element.id = `element-${elementCounter++}`;
                element.dataset.type = type;
                
                // Set position
                element.style.left = `${x}px`;
                element.style.top = `${y}px`;
                
                // Set content based on type
                switch(type) {
                    case 'primary-button':
                    case 'secondary-button':
                    case 'text-button':
                        element.textContent = 'Button';
                        break;
                    case 'magic-card':
                        element.textContent = 'Magic Card';
                        element.style.background = 'linear-gradient(135deg, #7E3FB3 0%, #E91E85 100%)';
                        break;
                    case 'magic-card-alt':
                        element.textContent = 'Magic Card';
                        element.style.background = 'linear-gradient(135deg, #3F51B5 0%, #00BCD4 100%)';
                        break;
                    case 'navbar':
                        const logo = document.createElement('div');
                        logo.className = 'navbar-logo';
                        element.appendChild(logo);
                        element.style.width = '100%';
                        element.style.height = '50px';
                        element.style.top = '0';
                        element.style.left = '0';
                        element.style.display = 'flex';
                        element.style.padding = '10px';
                        element.style.backgroundColor = 'white';
                        element.style.borderBottom = '1px solid #eee';
                        break;
                    case 'navbar-with-menu':
                        const navContainer = document.createElement('div');
                        navContainer.className = 'navbar-container';
                        
                        const navLogo = document.createElement('div');
                        navLogo.className = 'navbar-logo';
                        
                        const navMenu = document.createElement('div');
                        navMenu.className = 'navbar-menu';
                        
                        navContainer.appendChild(navLogo);
                        navContainer.appendChild(navMenu);
                        element.appendChild(navContainer);
                        
                        element.style.width = '100%';
                        element.style.height = '50px';
                        element.style.top = '0';
                        element.style.left = '0';
                        element.style.backgroundColor = 'white';
                        break;
                }
                
                // Make element movable
                element.addEventListener('mousedown', startDrag);
                
                // Add to canvas
                canvas.appendChild(element);
                
                // Select the new element
                selectElement(element);
            }
            
            // Handle element selection
            function selectElement(element) {
                // Deselect previous element
                if (selectedElement) {
                    selectedElement.classList.remove('selected');
                }
                
                // Select new element
                selectedElement = element;
                if (selectedElement) {
                    selectedElement.classList.add('selected');
                }
            }
            
            // Start dragging an element
            function startDrag(e) {
                // Only handle left mouse button
                if (e.button !== 0) return;
                
                const element = e.target.closest('.canvas-element');
                if (!element) return;
                
                e.preventDefault();
                
                // Select the element
                selectElement(element);
                
                // Calculate offset from where the mouse is on the element
                const rect = element.getBoundingClientRect();
                offsetX = e.clientX - rect.left;
                offsetY = e.clientY - rect.top;
                
                isDragging = true;
                
                // Move handlers
                document.addEventListener('mousemove', onDrag);
                document.addEventListener('mouseup', stopDrag);
            }
            
            // Handle dragging
            function onDrag(e) {
                if (!isDragging || !selectedElement) return;
                
                e.preventDefault();
                
                // Calculate new position relative to canvas
                const canvasRect = canvas.getBoundingClientRect();
                const x = e.clientX - canvasRect.left - offsetX;
                const y = e.clientY - canvasRect.top - offsetY;
                
                // Apply new position
                selectedElement.style.left = `${Math.max(0, x)}px`;
                selectedElement.style.top = `${Math.max(0, y)}px`;
            }
            
            // Stop dragging
            function stopDrag() {
                isDragging = false;
                document.removeEventListener('mousemove', onDrag);
                document.removeEventListener('mouseup', stopDrag);
            }
            
            // Handle canvas click for deselection
            canvas.addEventListener('click', function(e) {
                // If clicked directly on canvas (not on an element)
                if (e.target === canvas) {
                    selectElement(null);
                }
            });
            
            // Initialize: click on canvas to deselect any element
            canvas.click();
        });
    </script>
</body>
</html>